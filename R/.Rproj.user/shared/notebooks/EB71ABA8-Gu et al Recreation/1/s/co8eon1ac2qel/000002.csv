"0","############################################################################"
"0","##Function to generate return series + its residuals given specification of g function"
"0","############################################################################"
"0","gu_gen_rt_resid <- function(v_sd, ep_sd){"
"0","  elp <- matrix(0, nrow = N, ncol = 1)"
"0","  "
"0","  resid <- rep(list(elp), Time+1)"
"0","  "
"0","  ##############################"
"0","  Beta <- gen_Beta(C)"
"0","  v <- gu_gen_v(v_sd)"
"0","  error <- gu_gen_error(ep_sd)"
"0","  ##############################"
"0","  "
"0","  for (t in 1:(Time)) {"
"0","    for (i in 1:N){"
"0","      resid[[t+1]][i] <- Beta[[t+1]][i, ] %*% v[[t+1]] + error[[t+1]][i]"
"0","    }"
"0","  }"
"0","  return(resid)"
"0","}"
"0","gu_gen_g <- function(g){"
"0","  elp <- matrix(0, nrow = N, ncol = 1)"
"0","  "
"0","  rt <- rep(list(elp), Time+1)"
"0","  "
"0","  #########################"
"0","  gu_xt <- gen_gu_xt()"
"0","  #########################"
"0","  "
"0","  for (t in 1:(Time)) {"
"0","    for (i in 1:N){"
"0","      rt[[t+1]][i] <- g(C, gu_xt, i, t, theta)"
"0","    }"
"0","  }"
"0","  "
"0","  return(rt)"
"0","}"
