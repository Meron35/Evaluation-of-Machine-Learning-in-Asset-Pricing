normalize_variable_importance()),
cbind(model = "NN1_MAE", sample = sample,
NNet_1_mae_stats[[sample]]$variable_importance %>%
filter_vi_df("macro") %>%
normalize_variable_importance()),
cbind(model = "NN2_MSE", sample = sample,
NNet_2_mse_stats[[sample]]$variable_importance %>%
filter_vi_df("macro") %>%
normalize_variable_importance()),
cbind(model = "NN2_MAE", sample = sample,
NNet_2_mae_stats[[sample]]$variable_importance %>%
filter_vi_df("macro") %>%
normalize_variable_importance()),
cbind(model = "NN3_MSE", sample = sample,
NNet_3_mse_stats[[sample]]$variable_importance %>%
filter_vi_df("macro") %>%
normalize_variable_importance()),
cbind(model = "NN3_MAE", sample = sample,
NNet_3_mae_stats[[sample]]$variable_importance %>%
filter_vi_df("macro") %>%
normalize_variable_importance()),
cbind(model = "NN4_MSE", sample = sample,
NNet_4_mse_stats[[sample]]$variable_importance %>%
filter_vi_df("macro") %>%
normalize_variable_importance()),
cbind(model = "NN4_MAE", sample = sample,
NNet_4_mae_stats[[sample]]$variable_importance %>%
filter_vi_df("macro") %>%
normalize_variable_importance()),
cbind(model = "NN5_MSE", sample = sample,
NNet_5_mse_stats[[sample]]$variable_importance %>%
filter_vi_df("macro") %>%
normalize_variable_importance()),
cbind(model = "NN5_MAE", sample = sample,
NNet_5_mae_stats[[sample]]$variable_importance %>%
filter_vi_df("macro") %>%
normalize_variable_importance())
)
}
write.csv(empirical_tidy_vi_macro, file = "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_tidy_vi_macro.csv")
## Plot this
## A4 aspect ratio
a4_aspect_ratio <- 1.5
sample_1_vi_plot <- empirical_tidy_vi %>%
filter(sample == 1) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
group_by(sample, model) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
a4_aspect_ratio <- 1.5
empirical_tidy_vi_macro %>%
filter(sample == 1) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
group_by(sample, model) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_1_vi_macro.pdf",
width = 14, height = 14 * a4_aspect_ratio, units = "cm")
empirical_tidy_vi_macro %>%
filter(sample == 2) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
group_by(sample, model) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_2_vi_macro.pdf",
width = 14, height = 14 * a4_aspect_ratio, units = "cm")
empirical_tidy_vi_macro %>%
filter(sample == 3) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
group_by(sample, model) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_3_vi_macro.pdf",
width = 14, height = 14 * a4_aspect_ratio, units = "cm")
## All sample variable importance
empirical_tidy_vi_macro %>%
# Average importance over all training samples
group_by(model, variable) %>%
summarise(importance = mean(importance)) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_all_vi_macro.pdf",
width = 14, height = 14 * a4_aspect_ratio, units = "cm")
empirical_tidy_vi_macro %>%
mutate(variable = fct_reorder(variable, importance)) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
facet_grid(cols = vars(sample)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_all_vi_macro_facet.pdf",
width = 14 * a4_aspect_ratio, height = 14, units = "cm")
a4_aspect_ratio <- 1.5
empirical_tidy_vi_ind %>%
filter(sample == 1) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
group_by(sample, model) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
empirical_tidy_vi_ind <- foreach(sample = 1:3, .combine = "rbind") %do% {
rbind(
cbind(model = "LM_MSE", sample = sample,
LM_stats_mse[[sample]]$variable_importance %>%
filter_vi_df("ind") %>%
normalize_variable_importance()),
cbind(model = "LM_MAE", sample = sample,
LM_stats_mae[[sample]]$variable_importance %>%
filter_vi_df("ind") %>%
normalize_variable_importance()),
cbind(model = "ELN_MSE", sample = sample,
ELN_stats_mse[[sample]]$variable_importance %>%
filter_vi_df("ind") %>%
normalize_variable_importance()),
cbind(model = "ELN_MAE", sample = sample,
ELN_stats_mae[[sample]]$variable_importance %>%
filter_vi_df("ind") %>%
normalize_variable_importance()),
cbind(model = "RF_MSE", sample = sample,
RF_mse_stats[[sample]]$variable_importance %>%
filter_vi_df("ind") %>%
normalize_variable_importance()),
cbind(model = "RF_MAE", sample = sample,
RF_mae_stats[[sample]]$variable_importance %>%
filter_vi_df("ind") %>%
normalize_variable_importance()),
cbind(model = "NN1_MSE", sample = sample,
NNet_1_mse_stats[[sample]]$variable_importance %>%
filter_vi_df("ind") %>%
normalize_variable_importance()),
cbind(model = "NN1_MAE", sample = sample,
NNet_1_mae_stats[[sample]]$variable_importance %>%
filter_vi_df("ind") %>%
normalize_variable_importance()),
cbind(model = "NN2_MSE", sample = sample,
NNet_2_mse_stats[[sample]]$variable_importance %>%
filter_vi_df("ind") %>%
normalize_variable_importance()),
cbind(model = "NN2_MAE", sample = sample,
NNet_2_mae_stats[[sample]]$variable_importance %>%
filter_vi_df("ind") %>%
normalize_variable_importance()),
cbind(model = "NN3_MSE", sample = sample,
NNet_3_mse_stats[[sample]]$variable_importance %>%
filter_vi_df("ind") %>%
normalize_variable_importance()),
cbind(model = "NN3_MAE", sample = sample,
NNet_3_mae_stats[[sample]]$variable_importance %>%
filter_vi_df("ind") %>%
normalize_variable_importance()),
cbind(model = "NN4_MSE", sample = sample,
NNet_4_mse_stats[[sample]]$variable_importance %>%
filter_vi_df("ind") %>%
normalize_variable_importance()),
cbind(model = "NN4_MAE", sample = sample,
NNet_4_mae_stats[[sample]]$variable_importance %>%
filter_vi_df("ind") %>%
normalize_variable_importance()),
cbind(model = "NN5_MSE", sample = sample,
NNet_5_mse_stats[[sample]]$variable_importance %>%
filter_vi_df("ind") %>%
normalize_variable_importance()),
cbind(model = "NN5_MAE", sample = sample,
NNet_5_mae_stats[[sample]]$variable_importance %>%
filter_vi_df("ind") %>%
normalize_variable_importance())
)
}
write.csv(empirical_tidy_vi_ind, file = "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_tidy_vi_ind.csv")
a4_aspect_ratio <- 1.5
empirical_tidy_vi_macro %>%
filter(sample == 1) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
group_by(sample, model) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_1_vi_macro.pdf",
width = 14, height = 14 * a4_aspect_ratio, units = "cm")
empirical_tidy_vi_macro %>%
filter(sample == 2) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
group_by(sample, model) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_2_vi_macro.pdf",
width = 14, height = 14 * a4_aspect_ratio, units = "cm")
empirical_tidy_vi_macro %>%
filter(sample == 3) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
group_by(sample, model) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_3_vi_macro.pdf",
width = 14, height = 14 * a4_aspect_ratio, units = "cm")
## All sample variable importance
empirical_tidy_vi_macro %>%
# Average importance over all training samples
group_by(model, variable) %>%
summarise(importance = mean(importance)) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_all_vi_macro.pdf",
width = 14, height = 14 * a4_aspect_ratio, units = "cm")
empirical_tidy_vi_macro %>%
mutate(variable = fct_reorder(variable, importance)) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
facet_grid(cols = vars(sample)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_all_vi_macro_facet.pdf",
width = 14 * a4_aspect_ratio, height = 14, units = "cm")
a4_aspect_ratio <- 1.5
empirical_tidy_vi_ind %>%
filter(sample == 1) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
group_by(sample, model) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_1_vi_ind.pdf",
width = 15, height = 15 * a4_aspect_ratio, units = "cm")
empirical_tidy_vi_ind %>%
filter(sample == 2) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
group_by(sample, model) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_2_vi_ind.pdf",
width = 15, height = 15 * a4_aspect_ratio, units = "cm")
empirical_tidy_vi_ind %>%
filter(sample == 3) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
group_by(sample, model) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_3_vi_ind.pdf",
width = 15, height = 15 * a4_aspect_ratio, units = "cm")
## All sample variable importance
empirical_tidy_vi_ind %>%
# Average importance over all training samples
group_by(model, variable) %>%
summarise(importance = mean(importance)) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_all_vi_ind.pdf",
width = 15, height = 15 * a4_aspect_ratio, units = "cm")
empirical_tidy_vi_ind %>%
mutate(variable = fct_reorder(variable, importance)) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
facet_grid(cols = vars(sample)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_all_vi_ind_facet.pdf",
width = 15 * a4_aspect_ratio, height = 15, units = "cm")
a4_aspect_ratio <- 1.5
empirical_tidy_vi_ind %>%
filter(sample == 1) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
group_by(sample, model) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_1_vi_ind.pdf",
width = 14, height = 14 * a4_aspect_ratio, units = "cm")
empirical_tidy_vi_ind %>%
filter(sample == 2) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
group_by(sample, model) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_2_vi_ind.pdf",
width = 14, height = 14 * a4_aspect_ratio, units = "cm")
empirical_tidy_vi_ind %>%
filter(sample == 3) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
group_by(sample, model) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_3_vi_ind.pdf",
width = 14, height = 14 * a4_aspect_ratio, units = "cm")
## All sample variable importance
empirical_tidy_vi_ind %>%
# Average importance over all training samples
group_by(model, variable) %>%
summarise(importance = mean(importance)) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_all_vi_ind.pdf",
width = 14, height = 14 * a4_aspect_ratio, units = "cm")
empirical_tidy_vi_ind %>%
mutate(variable = fct_reorder(variable, importance)) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
facet_grid(cols = vars(sample)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_all_vi_ind_facet.pdf",
width = 14 * a4_aspect_ratio, height = 14, units = "cm")
a4_aspect_ratio <- 1.5
empirical_tidy_vi_macro %>%
filter(sample == 1) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
group_by(sample, model) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_1_vi_macro.pdf",
width = 15, height = 15 * a4_aspect_ratio, units = "cm")
empirical_tidy_vi_macro %>%
filter(sample == 2) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
group_by(sample, model) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_2_vi_macro.pdf",
width = 15, height = 15 * a4_aspect_ratio, units = "cm")
empirical_tidy_vi_macro %>%
filter(sample == 3) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
group_by(sample, model) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_3_vi_macro.pdf",
width = 15, height = 15 * a4_aspect_ratio, units = "cm")
## All sample variable importance
empirical_tidy_vi_macro %>%
# Average importance over all training samples
group_by(model, variable) %>%
summarise(importance = mean(importance)) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_all_vi_macro.pdf",
width = 15, height = 15 * a4_aspect_ratio, units = "cm")
empirical_tidy_vi_macro %>%
mutate(variable = fct_reorder(variable, importance)) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
facet_grid(cols = vars(sample)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_all_vi_macro_facet.pdf",
width = 15 * a4_aspect_ratio, height = 15, units = "cm")
## Plot this
## A4 aspect ratio
a4_aspect_ratio <- 1.5
sample_1_vi_plot <- empirical_tidy_vi %>%
filter(sample == 1) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
group_by(sample, model) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
a4_aspect_ratio <- 1.5
empirical_tidy_vi_ind %>%
filter(sample == 1) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
group_by(sample, model) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_1_vi_ind.pdf",
width = 15, height = 15 * a4_aspect_ratio, units = "cm")
empirical_tidy_vi_ind %>%
filter(sample == 2) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
group_by(sample, model) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_2_vi_ind.pdf",
width = 15, height = 15 * a4_aspect_ratio, units = "cm")
empirical_tidy_vi_ind %>%
filter(sample == 3) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
group_by(sample, model) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_3_vi_ind.pdf",
width = 15, height = 15 * a4_aspect_ratio, units = "cm")
## All sample variable importance
empirical_tidy_vi_ind %>%
# Average importance over all training samples
group_by(model, variable) %>%
summarise(importance = mean(importance)) %>%
mutate(variable = fct_reorder(variable, importance)) %>%
top_n(10, importance) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_all_vi_ind.pdf",
width = 15, height = 15 * a4_aspect_ratio, units = "cm")
empirical_tidy_vi_ind %>%
mutate(variable = fct_reorder(variable, importance)) %>%
ggplot() +
geom_tile(aes(x = model, y = variable, alpha = importance)) +
facet_grid(cols = vars(sample)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none")
ggsave(filename= "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/empirical_sample_all_vi_ind_facet.pdf",
width = 15 * a4_aspect_ratio, height = 15, units = "cm")
