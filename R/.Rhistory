test_MAE = mean(test_MAE), test_MSE = mean(test_MSE),
test_RMSE = mean(test_RMSE), test_RSquare = mean(test_RSquare)
)
## Save to csv
write.csv(all_loss_df_averaged, file = "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/simulation_loss_averaged.csv")
write.csv(all_loss_df, file = "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/simulation_loss.csv")
########
## Take the above and average over all training/test samples to make cleaner graphs/tables
all_loss_df_averaged_sam <- all_loss_df_averaged %>%
group_by(model, dgp_spec, SV, cross_corr) %>%
summarise(validation_MAE = mean(validation_MAE), validation_MSE = mean(validation_MSE),
validation_RMSE = mean(validation_RMSE), validation_RSquare = mean(validation_RSquare),
test_MAE = mean(test_MAE), test_MSE = mean(test_MSE),
test_RMSE = mean(test_RMSE), test_RSquare = mean(test_RSquare)
)
write.csv(all_loss_df_averaged_sam, file = "~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/simulation_loss_averaged_sam.csv")
#############################################################################
# Function to collate variable importance
normalize_variable_importance <- function(variable_importance_df) {
variable_importance_df %>%
# Add a very very tiny value so that division by zero does not occur
mutate(importance = importance + 1e-100) %>%
mutate(importance = importance + abs(min(importance))) %>%
mutate(importance = importance/sum(importance))
}
gen_tidy_vi <- function(simulation_results_list, realization_no, dgp_spec, SV, cross_corr) {
df <- foreach(sample = 1:3, .combine = "rbind") %do% {
rbind(
cbind(model = "LM_MSE", sample = sample,
normalize_variable_importance(simulation_results_list[[realization_no]]$LM_MSE[[sample]]$variable_importance)),
cbind(model = "LM_MAE", sample = sample,
normalize_variable_importance(simulation_results_list[[realization_no]]$LM_MAE[[sample]]$variable_importance)),
################################################################################################
cbind(model = "ELN_MSE", sample = sample,
normalize_variable_importance(simulation_results_list[[realization_no]]$ELN_MSE[[sample]]$variable_importance)),
cbind(model = "ELN_MAE", sample = sample,
normalize_variable_importance(simulation_results_list[[realization_no]]$ELN_MAE[[sample]]$variable_importance)),
################################################################################################
cbind(model = "RF_MSE", sample = sample,
normalize_variable_importance(simulation_results_list[[realization_no]]$RF_MSE[[sample]]$variable_importance)),
cbind(model = "RF_MAE", sample = sample,
normalize_variable_importance(simulation_results_list[[realization_no]]$RF_MAE[[sample]]$variable_importance)),
################################################################################################
cbind(model = "NN1_MSE", sample = sample,
normalize_variable_importance(simulation_results_list[[realization_no]]$NN1_MSE[[sample]]$variable_importance)),
cbind(model = "NN1_MAE", sample = sample,
normalize_variable_importance(simulation_results_list[[realization_no]]$NN1_MAE[[sample]]$variable_importance)),
cbind(model = "NN2_MSE", sample = sample,
normalize_variable_importance(simulation_results_list[[realization_no]]$NN2_MSE[[sample]]$variable_importance)),
cbind(model = "NN2_MAE", sample = sample,
normalize_variable_importance(simulation_results_list[[realization_no]]$NN2_MAE[[sample]]$variable_importance)),
cbind(model = "NN3_MSE", sample = sample,
normalize_variable_importance(simulation_results_list[[realization_no]]$NN3_MSE[[sample]]$variable_importance)),
cbind(model = "NN3_MAE", sample = sample,
normalize_variable_importance(simulation_results_list[[realization_no]]$NN3_MAE[[sample]]$variable_importance)),
cbind(model = "NN4_MSE", sample = sample,
normalize_variable_importance(simulation_results_list[[realization_no]]$NN4_MSE[[sample]]$variable_importance)),
cbind(model = "NN4_MAE", sample = sample,
normalize_variable_importance(simulation_results_list[[realization_no]]$NN4_MAE[[sample]]$variable_importance)),
cbind(model = "NN5_MSE", sample = sample,
normalize_variable_importance(simulation_results_list[[realization_no]]$NN5_MSE[[sample]]$variable_importance)),
cbind(model = "NN5_MAE", sample = sample,
normalize_variable_importance(simulation_results_list[[realization_no]]$NN5_MAE[[sample]]$variable_importance))
)
}
cbind(realization_no = realization_no, dgp_spec = dgp_spec, SV = SV, cross_corr = cross_corr, df)
}
# Iterate over all realizations
all_realize_vi <- function(simulation_results_list, dgp_spec, SV, cross_corr) {
foreach(realization_no = (1:10), .combine = "rbind") %do% {
gen_tidy_vi(simulation_results_list, realization_no, dgp_spec, SV, cross_corr)
}
}
all_vi_df <- rbind(
# all_realize_vi(g1_A1_nosv_0_results_all, dgp_spec = "g1", SV = 0, cross_corr = 0),
# all_realize_vi(g2_A1_nosv_0_results_all, dgp_spec = "g2", SV = 0, cross_corr = 0),
# all_realize_vi(g3_A1_nosv_0_results_all, dgp_spec = "g3", SV = 0, cross_corr = 0),
all_realize_vi(g1_A1_sv_0.01_results_all, dgp_spec = "g1", SV = 1, cross_corr = 0.01),
all_realize_vi(g2_A1_sv_0.01_results_all, dgp_spec = "g2", SV = 1, cross_corr = 0.01),
all_realize_vi(g3_A1_sv_0.01_results_all, dgp_spec = "g3", SV = 1, cross_corr = 0.01),
all_realize_vi(g1_A1_sv_0.1_results_all, dgp_spec = "g1", SV = 1, cross_corr = 0.1),
all_realize_vi(g2_A1_sv_0.1_results_all, dgp_spec = "g2", SV = 1, cross_corr = 0.1),
all_realize_vi(g3_A1_sv_0.1_results_all, dgp_spec = "g3", SV = 1, cross_corr = 0.1),
all_realize_vi(g1_A1_sv_1_results_all, dgp_spec = "g1", SV = 1, cross_corr = 1),
all_realize_vi(g2_A1_sv_1_results_all, dgp_spec = "g2", SV = 1, cross_corr = 1),
all_realize_vi(g3_A1_sv_1_results_all, dgp_spec = "g3", SV = 1, cross_corr = 1)
)
all_vi_df_averaged <- all_vi_df %>%
group_by(model, dgp_spec, sample, SV, cross_corr, variable) %>%
summarise(importance = mean(importance))
#################################
## COMPREHENSIVE TABLES (SHOVE IN APPENDIX)
#################################
## Test MAE Comprehensive
model_sam <- all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr != 0) %>%
filter(dgp_spec == "g1") %>%
dplyr::select(model)
cross_corr_sam <- all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr != 0) %>%
filter(dgp_spec == "g1") %>%
dplyr::select(cross_corr)
g1_sam_mae <- all_loss_df_averaged_sam %>%
ungroup() %>%
dplyr::select(dgp_spec, cross_corr, test_MAE) %>%
filter(cross_corr != 0) %>%
filter(dgp_spec == "g1") %>%
dplyr::select(-dgp_spec, -cross_corr)
g2_sam_mae <- all_loss_df_averaged_sam %>%
ungroup() %>%
dplyr::select(dgp_spec, cross_corr, test_MAE) %>%
filter(cross_corr != 0) %>%
filter(dgp_spec == "g2") %>%
dplyr::select(-dgp_spec, -cross_corr)
g3_sam_mae <- all_loss_df_averaged_sam %>%
ungroup() %>%
dplyr::select(dgp_spec, cross_corr, test_MAE) %>%
filter(cross_corr != 0) %>%
filter(dgp_spec == "g3") %>%
dplyr::select(-dgp_spec, -cross_corr)
#######
g1_sam_mse <- all_loss_df_averaged_sam %>%
ungroup() %>%
dplyr::select(dgp_spec, cross_corr, test_MSE) %>%
filter(cross_corr != 0) %>%
filter(dgp_spec == "g1") %>%
dplyr::select(-dgp_spec, -cross_corr)
g2_sam_mse <- all_loss_df_averaged_sam %>%
ungroup() %>%
dplyr::select(dgp_spec, cross_corr, test_MSE) %>%
filter(cross_corr != 0) %>%
filter(dgp_spec == "g2") %>%
dplyr::select(-dgp_spec, -cross_corr)
g3_sam_mse <- all_loss_df_averaged_sam %>%
ungroup() %>%
dplyr::select(dgp_spec, cross_corr, test_MSE) %>%
filter(cross_corr != 0) %>%
filter(dgp_spec == "g3") %>%
dplyr::select(-dgp_spec, -cross_corr)
#########################
g1_sam_r2 <- all_loss_df_averaged_sam %>%
ungroup() %>%
dplyr::select(dgp_spec, cross_corr, test_RSquare) %>%
filter(cross_corr != 0) %>%
filter(dgp_spec == "g1") %>%
dplyr::select(-dgp_spec, -cross_corr)
g2_sam_r2 <- all_loss_df_averaged_sam %>%
ungroup() %>%
dplyr::select(dgp_spec, cross_corr, test_RSquare) %>%
filter(cross_corr != 0) %>%
filter(dgp_spec == "g2") %>%
dplyr::select(-dgp_spec, -cross_corr)
g3_sam_r2 <- all_loss_df_averaged_sam %>%
ungroup() %>%
dplyr::select(dgp_spec, cross_corr, test_RSquare) %>%
filter(cross_corr != 0) %>%
filter(dgp_spec == "g3") %>%
dplyr::select(-dgp_spec, -cross_corr)
cbind(model_sam, cross_corr_sam,
g1_sam_mae, g1_sam_mse, g1_sam_r2,
g2_sam_mae, g2_sam_mse, g2_sam_r2,
g3_sam_mae, g3_sam_mse, g3_sam_r2) %>%
kable(align = "c", booktabs = T) %>%
kable_styling(full_width = F) %>%
add_header_above(c(" " = 1, " " = 1, "g1" = 3, "g2" = 3, "g3" = 3)) %>%
collapse_rows(columns = c(1:2), valign = "top")
all_loss_df_averaged_sam %>%
ungroup() %>%
dplyr::select(-starts_with("validation_"), -test_RMSE, -SV) %>%
gather(method, value, -c(model, dgp_spec, cross_corr)) %>%
spread(dgp_spec, value) %>%
spread()
all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 0.01) %>%
filter(dgp_spec == "g1") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
## Filtering out so that we only have the quantile methods
filter(model == "ELN_MAE" | model == "RF_MAE" |
model == "NN5_MAE" | model == "NN4_MAE" | model == "NN3_MAE" | model == "NN2_MAE" | model == "NN1_MAE") %>%
## Keep only top 5
head(5)
all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 0.01) %>%
filter(dgp_spec == "g2") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
## Filtering out so that we only have the quantile methods
filter(model == "ELN_MAE" | model == "RF_MAE" |
model == "NN5_MAE" | model == "NN4_MAE" | model == "NN3_MAE" | model == "NN2_MAE" | model == "NN1_MAE") %>%
## Keep only top 5
head(5)
all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 0.01) %>%
filter(dgp_spec == "g2") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
## Filtering out so that we only have the quantile methods %>%
## Keep only top 5
head(5)
all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 0.01) %>%
filter(dgp_spec == "g2") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
filter(model == "ELN_MAE" | model == "RF_MAE") %>%
## Filtering out so that we only have the quantile methods %>%
## Keep only top 5
head(5)
all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 0.01) %>%
filter(dgp_spec == "g2") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE)
all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 0.01) %>%
filter(dgp_spec == "g2") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
## Filtering out so that we only have the quantile methods %>%
## Keep only top 5
filter(model == "ELN_MAE" | moel == "RF_MAE" | model == "NN1_MSE" | model == "NN3_MSE" | model == "NN5_MAE") %>%
head(5)
all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 0.01) %>%
filter(dgp_spec == "g2") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
## Filtering out so that we only have the quantile methods %>%
## Keep only top 5
filter(model == "ELN_MAE" | model == "RF_MAE" | model == "NN1_MSE" | model == "NN3_MSE" | model == "NN5_MAE") %>%
head(5)
all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 0.01) %>%
filter(dgp_spec == "g3") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE)
all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 0.01) %>%
filter(dgp_spec == "g3") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
filter(model == "ELN_MAE" | model == "RF_MAE" | model == "NN1_MAE" | model == "NN2_MAE" | model == "NN3_MAE" | model == "NN5_MAE" | model == "NN4_MAE") %>%
head(5)
g1_0.01 <- all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 0.01) %>%
filter(dgp_spec == "g1") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
## Filtering out so that we only have the quantile methods
filter(model == "ELN_MAE" | model == "RF_MAE" |
model == "NN5_MAE" | model == "NN4_MAE" | model == "NN3_MAE" | model == "NN2_MAE" | model == "NN1_MAE") %>%
## Keep only top 5
head(5)
g2_0.01 <- all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 0.01) %>%
filter(dgp_spec == "g2") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
## Filtering out so that we only have the quantile methods %>%
## Keep only top 5
filter(model == "ELN_MAE" | model == "RF_MAE" | model == "NN1_MSE" | model == "NN3_MSE" | model == "NN5_MAE") %>%
head(5)
g3_0.01 <- all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 0.01) %>%
filter(dgp_spec == "g3") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
filter(model == "ELN_MAE" | model == "RF_MAE" | model == "NN1_MAE" | model == "NN2_MAE" | model == "NN3_MAE" | model == "NN5_MAE" | model == "NN4_MAE") %>%
head(5)
g1_0.01 <- all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 0.01) %>%
filter(dgp_spec == "g1") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
## Filtering out so that we only have the quantile methods
filter(model == "ELN_MAE" | model == "RF_MAE" |
model == "NN5_MAE" | model == "NN4_MAE" | model == "NN3_MAE" | model == "NN2_MAE" | model == "NN1_MAE") %>%
## Keep only top 5
head(5)
g2_0.01 <- all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 0.01) %>%
filter(dgp_spec == "g2") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
## Filtering out so that we only have the quantile methods %>%
## Keep only top 5
filter(model == "ELN_MAE" | model == "RF_MAE" | model == "NN1_MSE" | model == "NN3_MSE" | model == "NN5_MAE") %>%
head(5)
g3_0.01 <- all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 0.01) %>%
filter(dgp_spec == "g3") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
filter(model == "ELN_MAE" | model == "RF_MAE" | model == "NN1_MAE" | model == "NN2_MAE" | model == "NN3_MAE" | model == "NN5_MAE" | model == "NN4_MAE") %>%
head(5)
################
g1_1 <- all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 1) %>%
filter(dgp_spec == "g1") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
## Filtering out so that we only have the quantile methods
filter(model == "ELN_MAE" | model == "RF_MAE" |
model == "NN5_MAE" | model == "NN4_MAE" | model == "NN3_MAE" | model == "NN2_MAE" | model == "NN1_MAE") %>%
## Keep only top 5
head(5)
g2_1 <- all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 1) %>%
filter(dgp_spec == "g2") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
## Filtering out so that we only have the quantile methods %>%
## Keep only top 5
filter(model == "ELN_MAE" | model == "RF_MAE" | model == "NN1_MSE" | model == "NN3_MSE" | model == "NN5_MAE") %>%
head(5)
g3_1 <- all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 1) %>%
filter(dgp_spec == "g3") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
filter(model == "ELN_MAE" | model == "RF_MAE" | model == "NN1_MAE" | model == "NN2_MAE" | model == "NN3_MAE" | model == "NN5_MAE" | model == "NN4_MAE") %>%
head(5)
g1_0.01 <- all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 0.01) %>%
filter(dgp_spec == "g1") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
## Filtering out so that we only have the quantile methods
filter(model == "ELN_MAE" | model == "RF_MAE" |
model == "NN5_MAE" | model == "NN4_MAE" | model == "NN3_MAE" | model == "NN2_MAE" | model == "NN1_MAE") %>%
## Keep only top 5
head(5) %>%
dplyr::select(-dgp_spec)
g2_0.01 <- all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 0.01) %>%
filter(dgp_spec == "g2") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
## Filtering out so that we only have the quantile methods %>%
## Keep only top 5
filter(model == "ELN_MAE" | model == "RF_MAE" | model == "NN1_MSE" | model == "NN3_MSE" | model == "NN5_MAE") %>%
head(5) %>%
dplyr::select(-dgp_spec)
g3_0.01 <- all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 0.01) %>%
filter(dgp_spec == "g3") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
filter(model == "ELN_MAE" | model == "RF_MAE" | model == "NN1_MAE" | model == "NN2_MAE" | model == "NN3_MAE" | model == "NN5_MAE" | model == "NN4_MAE") %>%
head(5) %>%
dplyr::select(-dgp_spec)
################
g1_1 <- all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 1) %>%
filter(dgp_spec == "g1") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
## Filtering out so that we only have the quantile methods
filter(model == "ELN_MAE" | model == "RF_MAE" |
model == "NN5_MAE" | model == "NN4_MAE" | model == "NN3_MAE" | model == "NN2_MAE" | model == "NN1_MAE") %>%
## Keep only top 5
head(5) %>%
dplyr::select(-dgp_spec)
g2_1 <- all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 1) %>%
filter(dgp_spec == "g2") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
## Filtering out so that we only have the quantile methods %>%
## Keep only top 5
filter(model == "ELN_MAE" | model == "RF_MAE" | model == "NN1_MSE" | model == "NN3_MSE" | model == "NN5_MAE") %>%
head(5) %>%
dplyr::select(-dgp_spec)
g3_1 <- all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 1) %>%
filter(dgp_spec == "g3") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
filter(model == "ELN_MAE" | model == "RF_MAE" | model == "NN1_MAE" | model == "NN2_MAE" | model == "NN3_MAE" | model == "NN5_MAE" | model == "NN4_MAE") %>%
head(5) %>%
dplyr::select(-dgp_spec)
sam_0.01 <- cbind(g1_0.01, g2_0.01, g3_0.01)
View(sam_0.01)
sam_1 <- cbind(g1_1, g2_1, g3_1)
View(sam_1)
View(sam_0.01)
g1_0.01 <- all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 0.01) %>%
filter(dgp_spec == "g1") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
## Filtering out so that we only have the quantile methods
filter(model == "ELN_MAE" | model == "RF_MAE" |
model == "NN5_MAE" | model == "NN4_MAE" | model == "NN3_MAE" | model == "NN2_MAE" | model == "NN1_MAE") %>%
## Keep only top 5
head(5) %>%
dplyr::select(-dgp_spec, -cross_corr)
g2_0.01 <- all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 0.01) %>%
filter(dgp_spec == "g2") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
## Filtering out so that we only have the quantile methods %>%
## Keep only top 5
filter(model == "ELN_MAE" | model == "RF_MAE" | model == "NN1_MSE" | model == "NN3_MSE" | model == "NN5_MAE") %>%
head(5) %>%
dplyr::select(-dgp_spec, -cross_corr)
g3_0.01 <- all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 0.01) %>%
filter(dgp_spec == "g3") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
filter(model == "ELN_MAE" | model == "RF_MAE" | model == "NN1_MAE" | model == "NN2_MAE" | model == "NN3_MAE" | model == "NN5_MAE" | model == "NN4_MAE") %>%
head(5) %>%
dplyr::select(-dgp_spec, -cross_corr)
################
g1_1 <- all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 1) %>%
filter(dgp_spec == "g1") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
## Filtering out so that we only have the quantile methods
filter(model == "ELN_MAE" | model == "RF_MAE" |
model == "NN5_MAE" | model == "NN4_MAE" | model == "NN3_MAE" | model == "NN2_MAE" | model == "NN1_MAE") %>%
## Keep only top 5
head(5) %>%
dplyr::select(-dgp_spec, -cross_corr)
g2_1 <- all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 1) %>%
filter(dgp_spec == "g2") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
## Filtering out so that we only have the quantile methods %>%
## Keep only top 5
filter(model == "ELN_MAE" | model == "RF_MAE" | model == "NN1_MSE" | model == "NN3_MSE" | model == "NN5_MAE") %>%
head(5) %>%
dplyr::select(-dgp_spec, -cross_corr)
g3_1 <- all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 1) %>%
filter(dgp_spec == "g3") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE) %>%
filter(model == "ELN_MAE" | model == "RF_MAE" | model == "NN1_MAE" | model == "NN2_MAE" | model == "NN3_MAE" | model == "NN5_MAE" | model == "NN4_MAE") %>%
head(5) %>%
dplyr::select(-dgp_spec, -cross_corr)
sam_0.01 <- cbind(g1_0.01, g2_0.01, g3_0.01)
sam_1 <- cbind(g1_1, g2_1, g3_1)
View(sam_0.01)
all_loss_df_averaged_sam %>%
ungroup() %>%
filter(cross_corr == 1) %>%
filter(dgp_spec == "g1") %>%
arrange(-desc(test_MSE)) %>%
dplyr::select(model, dgp_spec, cross_corr, test_MSE)
rbind(sam_0.01, sam_1)
sam_0.01 <- cbind(g1_0.01, g2_0.01, g3_0.01)
sam_1 <- cbind(g1_1, g2_1, g3_1)
rbind(sam_0.01, sam_1)
sam_0.01 <- cbind(cross_corr = 0.01, g1_0.01, g2_0.01, g3_0.01)
sam_1 <- cbind(cross_corr = 1, g1_1, g2_1, g3_1)
rbind(sam_0.01, sam_1) %>%
kable(align = "c", booktabs = T) %>%
kable_styling(full_width = F) %>%
add_header_above(c(" " = 1, " " = 1, "g1" = 3, "g2" = 3, "g3" = 3)) %>%
collapse_rows(columns = c(1:2), valign = "top")
rbind(sam_0.01, sam_1)
rbind(sam_0.01, sam_1) %>%
kable(align = "c", booktabs = T) %>%
kable_styling(full_width = F) %>%
add_header_above(c(" " = 1, " " = 1, "g1" = 2, "g2" = 2, "g3" = 2)) %>%
collapse_rows(columns = c(1), valign = "top")
rbind(sam_0.01, sam_1)
rbind(sam_0.01, sam_1) %>%
kable(align = "c", booktabs = T) %>%
kable_styling(full_width = F) %>%
add_header_above(c(" " = 1, "g1" = 2, "g2" = 2, "g3" = 2)) %>%
collapse_rows(columns = c(1), valign = "top")
library(hqreg)
?hqreg
