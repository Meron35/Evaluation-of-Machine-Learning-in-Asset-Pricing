| model == "NN5_MAE") %>%
group_by(dgp_spec, model, cross_corr, variable, SV) %>%
summarise(importance = mean(importance)) %>%
top_n(42, mean(importance)) %>%
ungroup() %>%
mutate(variable = fct_reorder(variable, importance)) %>%
group_by(model) %>%
ggplot() +
geom_tile(aes(x = variable, y = model, alpha = importance)) +
scale_x_discrete(label = labels, breaks = breaks) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none") +
# Facet
facet_grid(rows = vars(cross_corr), cols = vars(dgp_spec))
all_vi_df_averaged %>%
filter(model == "NN1_MAE"
| model == "NN2_MAE"
| model == "NN3_MAE"
| model == "NN4_MAE"
| model == "NN5_MAE") %>%
group_by(dgp_spec, model, cross_corr, variable, SV) %>%
summarise(importance = mean(importance)) %>%
top_n(5, mean(importance)) %>%
ungroup() %>%
mutate(variable = fct_reorder(variable, importance)) %>%
group_by(model) %>%
ggplot() +
geom_tile(aes(x = variable, y = model, alpha = importance)) +
scale_x_discrete(label = labels, breaks = breaks) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none") +
# Facet
facet_grid(rows = vars(cross_corr), cols = vars(dgp_spec))
all_vi_df_averaged %>%
filter(model == "LM_MSE"
| model == "ELN_MAE"
| model == "RF_MAE"
| model == "NN5_MAE") %>%
group_by(dgp_spec, model, cross_corr, variable, SV) %>%
summarise(importance = mean(importance)) %>%
ungroup() %>%
mutate(variable = fct_reorder(variable, importance)) %>%
group_by(model) %>%
top_n(42, mean(importance)) %>%
ggplot() +
geom_tile(aes(x = variable, y = model, alpha = importance)) +
scale_x_discrete(label = labels, breaks = breaks) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none") +
# Facet
facet_grid(rows = vars(cross_corr), cols = vars(dgp_spec))
all_vi_df_averaged %>%
filter(model == "LM_MSE"
| model == "ELN_MAE"
| model == "RF_MAE"
| model == "NN5_MAE") %>%
group_by(dgp_spec, model, cross_corr, variable, SV) %>%
summarise(importance = mean(importance)) %>%
ungroup() %>%
mutate(variable = fct_reorder(variable, importance)) %>%
group_by(model) %>%
top_n(10, mean(importance)) %>%
ggplot() +
geom_tile(aes(x = variable, y = model, alpha = importance)) +
scale_x_discrete(label = labels, breaks = breaks) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none") +
# Facet
facet_grid(rows = vars(cross_corr), cols = vars(dgp_spec))
all_vi_df_averaged %>%
group_by(dgp_spec, cross_corr, variable, SV) %>%
summarise(importance = mean(importance))
all_vi_df_averaged %>%
group_by(dgp_spec, cross_corr, variable, SV) %>%
summarise(importance = mean(importance)) %>%
arrange(desc(importance)) %>%
top_frac(0.20, importance)
all_vi_df_averaged %>%
group_by(dgp_spec, cross_corr, variable, SV) %>%
summarise(importance = mean(importance)) %>%
arrange(desc(importance))
all_vi_df_averaged %>%
group_by(dgp_spec, cross_corr, variable, SV) %>%
summarise(importance = mean(importance)) %>%
arrange(desc(importance)) %>%
top_n(50, importance)
all_vi_df_averaged %>%
group_by(variable) %>%
summarise(importance = mean(importance)) %>%
arrange(desc(importance)) %>%
top_n(50, importance)
top_varaibles <- all_vi_df_averaged %>%
group_by(variable) %>%
summarise(importance = mean(importance)) %>%
arrange(desc(importance)) %>%
top_n(50, importance)
top_variables <- all_vi_df_averaged %>%
group_by(variable) %>%
summarise(importance = mean(importance)) %>%
arrange(desc(importance)) %>%
top_n(50, importance)
top_variables <- top_variables$variable
top_variables <- all_vi_df_averaged %>%
group_by(variable) %>%
summarise(importance = mean(importance)) %>%
arrange(desc(importance)) %>%
top_n(50, importance)
top_variables <- top_variables$variable
top_variables <- all_vi_df_averaged %>%
group_by(variable) %>%
summarise(importance = mean(importance)) %>%
arrange(desc(importance)) %>%
top_n(50, importance)
top_variables
top_variables <- as.character(top_variables$variable)
top_variables
all_vi_df_averaged %>%
filter(model == "LM_MSE"
| model == "ELN_MAE"
| model == "RF_MAE"
| model == "NN5_MAE") %>%
filter(variable %in% top_variables) %>%
group_by(dgp_spec, model, cross_corr, variable, SV) %>%
summarise(importance = mean(importance)) %>%
ungroup() %>%
mutate(variable = fct_reorder(variable, importance)) %>%
ggplot() +
geom_tile(aes(x = variable, y = model, alpha = importance)) +
scale_x_discrete(label = labels, breaks = breaks) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none") +
# Facet
facet_grid(rows = vars(cross_corr), cols = vars(dgp_spec))
top_variables <- all_vi_df_averaged %>%
group_by(variable) %>%
summarise(importance = mean(importance)) %>%
arrange(desc(importance)) %>%
top_n(40, importance)
top_variables <- as.character(top_variables$variable)
all_vi_df_averaged %>%
filter(model == "LM_MSE"
| model == "ELN_MAE"
| model == "RF_MAE"
| model == "NN5_MAE") %>%
filter(variable %in% top_variables) %>%
group_by(dgp_spec, model, cross_corr, variable, SV) %>%
summarise(importance = mean(importance)) %>%
ungroup() %>%
mutate(variable = fct_reorder(variable, importance)) %>%
ggplot() +
geom_tile(aes(x = variable, y = model, alpha = importance)) +
scale_x_discrete(label = labels, breaks = breaks) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none") +
# Facet
facet_grid(rows = vars(cross_corr), cols = vars(dgp_spec))
ggsave("~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/simulation_ave_vi_plot_pre.pdf",
width = 15 * a4_aspect_ratio, height = 15, units = "cm")
all_vi_df_averaged %>%
filter(model == "NN1_MAE"
| model == "NN2_MAE"
| model == "NN3_MAE"
| model == "NN4_MAE"
| model == "NN5_MAE") %>%
filter(variable %in% top_variables) %>%
group_by(dgp_spec, model, cross_corr, variable, SV) %>%
summarise(importance = mean(importance)) %>%
ungroup() %>%
mutate(variable = fct_reorder(variable, importance)) %>%
ggplot() +
geom_tile(aes(x = variable, y = model, alpha = importance)) +
scale_x_discrete(label = labels, breaks = breaks) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none") +
# Facet
facet_grid(rows = vars(cross_corr), cols = vars(dgp_spec))
ggsave("~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/simulation_ave_vi_plot_pre_nn.pdf",
width = 20 * a4_aspect_ratio, height = 20, units = "cm")
top_variables <- all_vi_df_averaged %>%
group_by(variable) %>%
summarise(importance = mean(importance)) %>%
arrange(desc(importance)) %>%
top_n(20, importance)
top_variables <- as.character(top_variables$variable)
all_vi_df_averaged %>%
filter(model == "LM_MSE"
| model == "ELN_MAE"
| model == "RF_MAE"
| model == "NN5_MAE") %>%
filter(variable %in% top_variables) %>%
group_by(dgp_spec, model, cross_corr, variable, SV) %>%
summarise(importance = mean(importance)) %>%
ungroup() %>%
mutate(variable = fct_reorder(variable, importance)) %>%
ggplot() +
geom_tile(aes(x = variable, y = model, alpha = importance)) +
scale_x_discrete(label = labels, breaks = breaks) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none") +
# Facet
facet_grid(rows = vars(cross_corr), cols = vars(dgp_spec))
ggsave("~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/simulation_ave_vi_plot_pre.pdf",
width = 15 * a4_aspect_ratio, height = 15, units = "cm")
all_vi_df_averaged %>%
filter(model == "NN1_MAE"
| model == "NN2_MAE"
| model == "NN3_MAE"
| model == "NN4_MAE"
| model == "NN5_MAE") %>%
filter(variable %in% top_variables) %>%
group_by(dgp_spec, model, cross_corr, variable, SV) %>%
summarise(importance = mean(importance)) %>%
ungroup() %>%
mutate(variable = fct_reorder(variable, importance)) %>%
ggplot() +
geom_tile(aes(x = variable, y = model, alpha = importance)) +
scale_x_discrete(label = labels, breaks = breaks) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none") +
# Facet
facet_grid(rows = vars(cross_corr), cols = vars(dgp_spec))
ggsave("~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/simulation_ave_vi_plot_pre_nn.pdf",
width = 20 * a4_aspect_ratio, height = 20, units = "cm")
top_variables <- all_vi_df_averaged %>%
group_by(variable) %>%
summarise(importance = mean(importance)) %>%
arrange(desc(importance)) %>%
top_n(30, importance)
top_variables <- as.character(top_variables$variable)
all_vi_df_averaged %>%
filter(model == "LM_MSE"
| model == "ELN_MAE"
| model == "RF_MAE"
| model == "NN5_MAE") %>%
filter(variable %in% top_variables) %>%
group_by(dgp_spec, model, cross_corr, variable, SV) %>%
summarise(importance = mean(importance)) %>%
ungroup() %>%
mutate(variable = fct_reorder(variable, importance)) %>%
ggplot() +
geom_tile(aes(x = variable, y = model, alpha = importance)) +
scale_x_discrete(label = labels, breaks = breaks) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none") +
# Facet
facet_grid(rows = vars(cross_corr), cols = vars(dgp_spec))
ggsave("~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/simulation_ave_vi_plot_pre.pdf",
width = 15 * a4_aspect_ratio, height = 15, units = "cm")
all_vi_df_averaged %>%
filter(model == "NN1_MAE"
| model == "NN2_MAE"
| model == "NN3_MAE"
| model == "NN4_MAE"
| model == "NN5_MAE") %>%
filter(variable %in% top_variables) %>%
group_by(dgp_spec, model, cross_corr, variable, SV) %>%
summarise(importance = mean(importance)) %>%
ungroup() %>%
mutate(variable = fct_reorder(variable, importance)) %>%
ggplot() +
geom_tile(aes(x = variable, y = model, alpha = importance)) +
scale_x_discrete(label = labels, breaks = breaks) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none") +
# Facet
facet_grid(rows = vars(cross_corr), cols = vars(dgp_spec))
ggsave("~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/simulation_ave_vi_plot_pre_nn.pdf",
width = 20 * a4_aspect_ratio, height = 20, units = "cm")
all_vi_df_averaged %>%
filter(model == "LM_MSE"
| model == "ELN_MAE"
| model == "RF_MAE"
| model == "NN5_MAE") %>%
filter(variable %in% top_variables) %>%
group_by(dgp_spec, model, cross_corr, variable, SV) %>%
summarise(importance = mean(importance)) %>%
ungroup() %>%
mutate(variable = fct_reorder(variable, importance))
all_vi_df_averaged %>%
filter(model == "LM_MSE"
| model == "ELN_MAE"
| model == "RF_MAE"
| model == "NN5_MAE") %>%
filter(variable %in% top_variables) %>%
group_by(dgp_spec, model, cross_corr, variable, SV) %>%
summarise(importance = mean(importance)) %>%
ungroup() %>%
mutate(variable = fct_reorder(variable, importance)) %>%
ggplot() +
geom_tile(aes(x = variable, y = model, fill = importance)) +
scale_x_discrete(label = labels, breaks = breaks) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none") +
scale_fill_distiller(palette = "Spectral") +
# Facet
facet_grid(rows = vars(cross_corr), cols = vars(dgp_spec))
all_vi_df_averaged %>%
filter(model == "NN1_MAE"
| model == "NN2_MAE"
| model == "NN3_MAE"
| model == "NN4_MAE"
| model == "NN5_MAE") %>%
filter(variable %in% top_variables) %>%
group_by(dgp_spec, model, cross_corr, variable, SV) %>%
summarise(importance = mean(importance)) %>%
ungroup() %>%
mutate(variable = fct_reorder(variable, importance)) %>%
ggplot() +
geom_tile(aes(x = variable, y = model, fill = importance)) +
scale_x_discrete(label = labels, breaks = breaks) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "none") +
scale_fill_distiller(palette = "Spectral") +
# Facet
facet_grid(rows = vars(cross_corr), cols = vars(dgp_spec))
top_variables <- all_vi_df_averaged %>%
group_by(variable) %>%
summarise(importance = mean(importance)) %>%
arrange(desc(importance)) %>%
top_n(30, importance)
top_variables <- as.character(top_variables$variable)
all_vi_df_averaged %>%
filter(model == "LM_MSE"
| model == "ELN_MAE"
| model == "RF_MAE"
| model == "NN5_MAE") %>%
filter(variable %in% top_variables) %>%
group_by(dgp_spec, model, cross_corr, variable, SV) %>%
summarise(importance = mean(importance)) %>%
ungroup() %>%
mutate(variable = fct_reorder(variable, importance)) %>%
ggplot() +
geom_tile(aes(x = variable, y = model, fill = importance)) +
scale_x_discrete(label = labels, breaks = breaks) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "right") +
scale_fill_distiller(palette = "Spectral") +
# Facet
facet_grid(rows = vars(cross_corr), cols = vars(dgp_spec))
ggsave("~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/simulation_ave_vi_plot_pre.pdf",
width = 20 * a4_aspect_ratio, height = 20, units = "cm")
all_vi_df_averaged %>%
filter(model == "LM_MSE"
| model == "ELN_MAE"
| model == "RF_MAE"
| model == "NN5_MAE") %>%
filter(variable %in% top_variables) %>%
group_by(dgp_spec, model, cross_corr, variable, SV) %>%
summarise(importance = mean(importance)) %>%
ungroup() %>%
mutate(variable = fct_reorder(variable, importance)) %>%
ggplot() +
geom_tile(aes(x = variable, y = model, fill = importance)) +
scale_x_discrete(label = labels, breaks = breaks) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "right") +
scale_fill_distiller(palette = "Spectral") +
# Facet
facet_grid(rows = vars(cross_corr), cols = vars(dgp_spec))
ggsave("~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/simulation_ave_vi_plot_pre.pdf",
width = 20 * a4_aspect_ratio, height = 20, units = "cm")
all_vi_df_averaged %>%
filter(model == "NN1_MAE"
| model == "NN2_MAE"
| model == "NN3_MAE"
| model == "NN4_MAE"
| model == "NN5_MAE") %>%
filter(variable %in% top_variables) %>%
group_by(dgp_spec, model, cross_corr, variable, SV) %>%
summarise(importance = mean(importance)) %>%
ungroup() %>%
mutate(variable = fct_reorder(variable, importance)) %>%
ggplot() +
geom_tile(aes(x = variable, y = model, fill = importance)) +
scale_x_discrete(label = labels, breaks = breaks) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "right") +
scale_fill_distiller(palette = "Spectral") +
# Facet
facet_grid(rows = vars(cross_corr), cols = vars(dgp_spec))
ggsave("~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/simulation_ave_vi_plot_pre_nn.pdf",
width = 20 * a4_aspect_ratio, height = 20, units = "cm")
top_variables <- all_vi_df_averaged %>%
group_by(variable) %>%
summarise(importance = mean(importance)) %>%
arrange(desc(importance)) %>%
top_n(40, importance)
top_variables <- as.character(top_variables$variable)
all_vi_df_averaged %>%
filter(model == "LM_MSE"
| model == "ELN_MAE"
| model == "RF_MAE"
| model == "NN5_MAE") %>%
filter(variable %in% top_variables) %>%
group_by(dgp_spec, model, cross_corr, variable, SV) %>%
summarise(importance = mean(importance)) %>%
ungroup() %>%
mutate(variable = fct_reorder(variable, importance)) %>%
ggplot() +
geom_tile(aes(x = variable, y = model, fill = importance)) +
scale_x_discrete(label = labels, breaks = breaks) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "right") +
scale_fill_distiller(palette = "Spectral") +
# Facet
facet_grid(rows = vars(cross_corr), cols = vars(dgp_spec))
ggsave("~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/simulation_ave_vi_plot_pre.pdf",
width = 20 * a4_aspect_ratio, height = 20, units = "cm")
ggsave("~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/simulation_ave_vi_plot_pre.pdf",
width = 20 * a4_aspect_ratio, height = 20, units = "cm")
top_variables <- all_vi_df_averaged %>%
group_by(variable) %>%
summarise(importance = mean(importance)) %>%
arrange(desc(importance)) %>%
top_n(35, importance)
top_variables <- as.character(top_variables$variable)
all_vi_df_averaged %>%
filter(model == "LM_MSE"
| model == "ELN_MAE"
| model == "RF_MAE"
| model == "NN5_MAE") %>%
filter(variable %in% top_variables) %>%
group_by(dgp_spec, model, cross_corr, variable, SV) %>%
summarise(importance = mean(importance)) %>%
ungroup() %>%
mutate(variable = fct_reorder(variable, importance)) %>%
ggplot() +
geom_tile(aes(x = variable, y = model, fill = importance)) +
scale_x_discrete(label = labels, breaks = breaks) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "right") +
scale_fill_distiller(palette = "Spectral") +
# Facet
facet_grid(rows = vars(cross_corr), cols = vars(dgp_spec))
ggsave("~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/simulation_ave_vi_plot_pre.pdf",
width = 20 * a4_aspect_ratio, height = 20, units = "cm")
all_vi_df_averaged %>%
filter(model == "NN1_MAE"
| model == "NN2_MAE"
| model == "NN3_MAE"
| model == "NN4_MAE"
| model == "NN5_MAE") %>%
filter(variable %in% top_variables) %>%
group_by(dgp_spec, model, cross_corr, variable, SV) %>%
summarise(importance = mean(importance)) %>%
ungroup() %>%
mutate(variable = fct_reorder(variable, importance)) %>%
ggplot() +
geom_tile(aes(x = variable, y = model, fill = importance)) +
scale_x_discrete(label = labels, breaks = breaks) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "right") +
scale_fill_distiller(palette = "Spectral") +
# Facet
facet_grid(rows = vars(cross_corr), cols = vars(dgp_spec))
ggsave("~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/simulation_ave_vi_plot_pre_nn.pdf",
width = 20 * a4_aspect_ratio, height = 20, units = "cm")
all_vi_df_averaged %>%
filter(model == "RF_MAE"
| model == "RF_MSE") %>%
filter(variable %in% top_variables) %>%
group_by(dgp_spec, model, cross_corr, variable, SV) %>%
summarise(importance = mean(importance)) %>%
ungroup() %>%
mutate(variable = fct_reorder(variable, importance)) %>%
ggplot() +
geom_tile(aes(x = variable, y = model, fill = importance)) +
scale_x_discrete(label = labels, breaks = breaks) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "right") +
scale_fill_distiller(palette = "Spectral") +
# Facet
facet_grid(rows = vars(cross_corr), cols = vars(dgp_spec))
ggsave("~/GitHub/Evaluation-of-Machine-Learning-in-Asset-Pricing/Results/simulation_ave_vi_plot_pre_rf.pdf",
width = 20 * a4_aspect_ratio, height = 20, units = "cm")
all_vi_df_averaged %>%
filter(model == "ELN_MAE"
| model == "ELN_MSE") %>%
filter(variable %in% top_variables) %>%
group_by(dgp_spec, model, cross_corr, variable, SV) %>%
summarise(importance = mean(importance)) %>%
ungroup() %>%
mutate(variable = fct_reorder(variable, importance)) %>%
ggplot() +
geom_tile(aes(x = variable, y = model, fill = importance)) +
scale_x_discrete(label = labels, breaks = breaks) +
theme_bw() +
theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
theme(legend.position = "right") +
scale_fill_distiller(palette = "Spectral") +
# Facet
facet_grid(rows = vars(cross_corr), cols = vars(dgp_spec))
